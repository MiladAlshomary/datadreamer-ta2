TA2 Evaluation
1. LoRA Sadiri + HRS - sadiri_random_batch_creation_model_v4final_model, sadiri_v4_hrs_ta2p1p2_model_v1/luar-trainer/_model/
2. LoRA HRS - LUAR-MUD, luar_v1_hrs_ta2p1p2_model_v1/luar-trainer/_model/ 
3. Sadiri full trained + LoRA HRS - sadiri_full_training_v1final_model, sadiri_full_training_v1_hrs_ta2p1p2_model_v1/luar-trainer/_model/

mkdir -p /data/araghavan/HIATUS/datadreamer-ta2/eval/2025_01_08_deadline/system_1_sadiri_lora_hrs_lora/sadiri_v4_hrs_ta2p1p2_model_v1_checkpoint
cd /data/araghavan/HIATUS/datadreamer-ta2/eval/2025_01_08_deadline/system_1_sadiri_lora_hrs_lora
cp -r /data/araghavan/HIATUS/datadreamer-ta2/output/sadiri_random_batch_creation_model_v4final_model /data/araghavan/HIATUS/datadreamer-ta2/eval/2025_01_08_deadline/system_1_sadiri_lora_hrs_lora
cp /data/araghavan/HIATUS/datadreamer-ta2/output/sadiri_v4_hrs_ta2p1p2_model_v1/luar-trainer/_model/* /data/araghavan/HIATUS/datadreamer-ta2/eval/2025_01_08_deadline/system_1_sadiri_lora_hrs_lora/sadiri_v4_hrs_ta2p1p2_model_v1_checkpoint/
 
mkdir -p /data/araghavan/HIATUS/datadreamer-ta2/eval/2025_01_08_deadline/system_2_hrs_lora/luar_v1_hrs_ta2p1p2_model_v1_checkpoint
cd /data/araghavan/HIATUS/datadreamer-ta2/eval/2025_01_08_deadline/system_2_hrs_lora
cp -r /data/araghavan/HIATUS/datadreamer-ta2/training_source/rrivera1849/LUAR-MUD /data/araghavan/HIATUS/datadreamer-ta2/eval/2025_01_08_deadline/system_2_hrs_lora
cp /data/araghavan/HIATUS/datadreamer-ta2/output/luar_v1_hrs_ta2p1p2_model_v1/luar-trainer/_model/* /data/araghavan/HIATUS/datadreamer-ta2/eval/2025_01_08_deadline/system_2_hrs_lora/luar_v1_hrs_ta2p1p2_model_v1_checkpoint

mkdir -p /data/araghavan/HIATUS/datadreamer-ta2/eval/2025_01_08_deadline/system_3_sadiri_full_hrs_lora/sadiri_full_training_v1_hrs_ta2p1p2_model_v1_checkpoint
cd /data/araghavan/HIATUS/datadreamer-ta2/eval/2025_01_08_deadline/system_3_sadiri_full_hrs_lora/
cp -r /data/araghavan/HIATUS/datadreamer-ta2/output/sadiri_full_training_v1final_model /data/araghavan/HIATUS/datadreamer-ta2/eval/2025_01_08_deadline/system_3_sadiri_full_hrs_lora
cp /data/araghavan/HIATUS/datadreamer-ta2/output/sadiri_full_training_v1_hrs_ta2p1p2_model_v1/luar-trainer/_model/* /data/araghavan/HIATUS/datadreamer-ta2/eval/2025_01_08_deadline/system_3_sadiri_full_hrs_lora/sadiri_full_training_v1_hrs_ta2p1p2_model_v1_checkpoint


Scores:
3 >> 2 >> 1

We Submitted 3, 1

Merged model of first stage (when trained on Sadiri) [Goes to LUAR MUD folder]
LoRA adaptor in the second stage (when trained on HRS) [Goes to checkpoint folder]



Baseline
python -u main.py  --input-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/hrs_release_11-22-24/HRS_evaluation_samples/HRS2_english_medium/TA2/HRS2_english_medium_sample-0_crossGenre/data/"  --output-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/hrs_release_11-22-24_outputs/luar_baseline/" --ground-truth-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/hrs_release_11-22-24/HRS_evaluation_samples/HRS2_english_medium/TA2/HRS2_english_medium_sample-0_crossGenre/groundtruth/"  --run-id 1 --query-identifier authorIDs --candidate-identifier authorSetIDs -ta1 baseline_luar -g -ta2 baseline --language eng

/data/araghavan/HIATUS/pausit-eval-ta2/data/hrs_release_11-22-24/HRS_evaluation_samples/HRS2_english_medium/TA2/HRS2_english_medium_sample-0_crossGenre/data/

Sadiri + HRS
python -u main.py  --input-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/hrs_release_11-22-24/HRS_evaluation_samples/HRS2_english_medium/TA2/HRS2_english_medium_sample-0_crossGenre/data/"  --output-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/hrs_release_11-22-24_outputs/test_TA2_data_op_sadiri_random_batch_creation_model_v4_combined_hrs_tuned/" --ground-truth-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/hrs_release_11-22-24/HRS_evaluation_samples/HRS2_english_medium/TA2/HRS2_english_medium_sample-0_crossGenre/groundtruth/"  --run-id 1 --query-identifier authorIDs --candidate-identifier authorSetIDs -ta1 datadreamer_lora -g -ta2 baseline --language eng


Sadiri Only v2
python -u main.py  --input-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/hrs_release_11-22-24/HRS_evaluation_samples/HRS2_english_medium/TA2/HRS2_english_medium_sample-0_crossGenre/data/"  --output-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/hrs_release_11-22-24_outputs/test_TA2_data_op_sadiri_random_batch_creation_model_v2/" --ground-truth-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/hrs_release_11-22-24/HRS_evaluation_samples/HRS2_english_medium/TA2/HRS2_english_medium_sample-0_crossGenre/groundtruth/"  --run-id 2 --query-identifier authorIDs --candidate-identifier authorSetIDs -ta1 datadreamer_lora -g -ta2 baseline --language eng

Sadiri Only v4
python -u main.py  --input-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/hrs_release_11-22-24/HRS_evaluation_samples/HRS2_english_medium/TA2/HRS2_english_medium_sample-0_crossGenre/data/"  --output-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/hrs_release_11-22-24_outputs/test_TA2_data_op_sadiri_random_batch_creation_model_v4/" --ground-truth-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/hrs_release_11-22-24/HRS_evaluation_samples/HRS2_english_medium/TA2/HRS2_english_medium_sample-0_crossGenre/groundtruth/"  --run-id 3 --query-identifier authorIDs --candidate-identifier authorSetIDs -ta1 datadreamer_lora -g -ta2 baseline --language eng

HRS Only v5
python -u main.py  --input-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/hrs_release_11-22-24/HRS_evaluation_samples/HRS2_english_medium/TA2/HRS2_english_medium_sample-0_crossGenre/data/"  --output-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/hrs_release_11-22-24_outputs/test_TA2_data_op_combined_hrs_tuned_v5/" --ground-truth-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/hrs_release_11-22-24/HRS_evaluation_samples/HRS2_english_medium/TA2/HRS2_english_medium_sample-0_crossGenre/groundtruth/"  --run-id 4 --query-identifier authorIDs --candidate-identifier authorSetIDs -ta1 datadreamer_lora -g -ta2 baseline --language eng

<## k-fold-cross-validation splits with same test set>
train_eval_k_fold - Sadiri + hrs fine tuning
python train_eval_k_fold.py --train-model-path "/data/araghavan/HIATUS/datadreamer-ta2/output/sadiri_random_batch_creation_model_v4final_model" --train-fold-path "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/english_crossGenre_092424_kf_fold_splits_qc/crossGenre/" --train-model-output-dir "/data/araghavan/HIATUS/datadreamer-ta2/output/hrs_trained_k_fold_models" --eval-trained-model-checkpoint-dir "/data/araghavan/HIATUS/pausit-eval-ta2/SIVs/datadreamer_lora/checkpoint" --eval-main-script-path "/data/araghavan/HIATUS/pausit-eval-ta2/main.py" --eval-output-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/english_crossGenre_092424_kf_fold_splits_qc_outputs" --eval-ta1-approach "datadreamer_lora" --eval-ta2-approach "baseline" --eval-language "eng"

Op:
/data/araghavan/HIATUS/pausit-eval-ta2/data/english_crossGenre_092424_kf_fold_splits_qc_outputs/run_20241223_103554/aggregated_results.json

train_eval_k_fold - hrs fine tuning only
python train_eval_k_fold.py --train-model-path "/data/araghavan/HIATUS/datadreamer-ta2/training_source/rrivera1849/LUAR-MUD" --train-fold-path "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/english_crossGenre_092424_kf_fold_splits_qc/crossGenre/" --train-model-output-dir "/data/araghavan/HIATUS/datadreamer-ta2/output/hrs_trained_k_fold_models" --eval-trained-model-checkpoint-dir "/data/araghavan/HIATUS/pausit-eval-ta2/SIVs/datadreamer_lora/checkpoint" --eval-main-script-path "/data/araghavan/HIATUS/pausit-eval-ta2/main.py" --eval-output-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/english_crossGenre_092424_kf_fold_splits_qc_outputs" --eval-ta1-approach "datadreamer_lora" --eval-ta2-approach "baseline" --eval-language "eng"

Op:
/data/araghavan/HIATUS/pausit-eval-ta2/data/english_crossGenre_092424_kf_fold_splits_qc_outputs/run_20241223_104312/aggregated_results.json

HRS Only - k fold test
python -u main.py  --input-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/english_crossGenre_092424_kf_fold_splits_qc/crossGenre/fold_1/test/TA2/hrs2_09-24-24_english_crossGenre-combined/data/"  --output-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/english_crossGenre_092424_kf_fold_splits_qc_outputs/k_fold_test_baseline_luar_20241223_104810/" --ground-truth-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/english_crossGenre_092424_kf_fold_splits_qc/crossGenre/fold_1/test/TA2/hrs2_09-24-24_english_crossGenre-combined/groundtruth/"  --run-id 5 --query-identifier authorIDs --candidate-identifier authorSetIDs -ta1 baseline_luar -g -ta2 baseline --language eng

<copy luar-trainer/_model checkpoint to sivs/datadreamer_lora/checkpoint dir>
Sadiri Only - k folds
python -u main.py  --input-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/english_crossGenre_092424_kf_fold_splits_qc/crossGenre/fold_1/test/TA2/hrs2_09-24-24_english_crossGenre-combined/data/"  --output-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/hrs_release_11-22-24_outputs/test_TA2_data_op_sadiri_random_batch_creation_model_v4_20241223_114142/" --ground-truth-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/english_crossGenre_092424_kf_fold_splits_qc/crossGenre/fold_1/test/TA2/hrs2_09-24-24_english_crossGenre-combined/groundtruth/"  --run-id 7 --query-identifier authorIDs --candidate-identifier authorSetIDs -ta1 datadreamer_lora -g -ta2 baseline --language eng


<## 5-fold-random splits with different test set>
train_eval_k_fold - Sadiri + hrs fine tuning
python train_eval_k_fold.py --train-model-path "/data/araghavan/HIATUS/datadreamer-ta2/output/sadiri_random_batch_creation_model_v4final_model" --train-fold-path "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc/crossGenre/" --train-model-output-dir "/data/araghavan/HIATUS/datadreamer-ta2/output/hrs_trained_5_folds_random_models" --eval-trained-model-checkpoint-dir "/data/araghavan/HIATUS/pausit-eval-ta2/SIVs/datadreamer_lora/checkpoint" --eval-main-script-path "/data/araghavan/HIATUS/pausit-eval-ta2/main.py" --eval-output-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/nikita_direct_splits_5_random_fold_splits_qc_outputs" --eval-ta1-approach "datadreamer_lora" --eval-ta2-approach "baseline" --eval-language "eng"

Op:
/data/araghavan/HIATUS/pausit-eval-ta2/data/nikita_direct_splits_5_random_fold_splits_qc_outputs/run_20241228_162055_sad_hrs/aggregated_results.json

train_eval_k_fold - hrs fine tuning only
python train_eval_k_fold.py --train-model-path "/data/araghavan/HIATUS/datadreamer-ta2/training_source/rrivera1849/LUAR-MUD" --train-fold-path "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc/crossGenre/" --train-model-output-dir "/data/araghavan/HIATUS/datadreamer-ta2/output/hrs_trained_5_folds_random_models" --eval-trained-model-checkpoint-dir "/data/araghavan/HIATUS/pausit-eval-ta2/SIVs/datadreamer_lora/checkpoint" --eval-main-script-path "/data/araghavan/HIATUS/pausit-eval-ta2/main.py" --eval-output-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/nikita_direct_splits_5_random_fold_splits_qc_outputs" --eval-ta1-approach "datadreamer_lora" --eval-ta2-approach "baseline" --eval-language "eng"

Op:
/data/araghavan/HIATUS/pausit-eval-ta2/data/nikita_direct_splits_5_random_fold_splits_qc_outputs/run_20241228_162846_hrs/aggregated_results.json

HRS Only - k fold test
python -u main.py  --input-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc/crossGenre/fold_1/test/TA2/hrs2_09-24-24_english_crossGenre-combined/data/"  --output-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc_outputs/k_fold_test_baseline_luar_20241223_104810/" --ground-truth-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc/crossGenre/fold_1/test/TA2/hrs2_09-24-24_english_crossGenre-combined/groundtruth/"  --run-id 5 --query-identifier authorIDs --candidate-identifier authorSetIDs -ta1 baseline_luar -g -ta2 baseline --language eng
python -u main.py  --input-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc/crossGenre/fold_2/test/TA2/hrs2_09-24-24_english_crossGenre-combined/data/"  --output-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc_outputs/k_fold_test_baseline_luar_20241223_104811/" --ground-truth-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc/crossGenre/fold_2/test/TA2/hrs2_09-24-24_english_crossGenre-combined/groundtruth/"  --run-id 6 --query-identifier authorIDs --candidate-identifier authorSetIDs -ta1 baseline_luar -g -ta2 baseline --language eng
python -u main.py  --input-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc/crossGenre/fold_3/test/TA2/hrs2_09-24-24_english_crossGenre-combined/data/"  --output-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc_outputs/k_fold_test_baseline_luar_20241223_104812/" --ground-truth-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc/crossGenre/fold_3/test/TA2/hrs2_09-24-24_english_crossGenre-combined/groundtruth/"  --run-id 7 --query-identifier authorIDs --candidate-identifier authorSetIDs -ta1 baseline_luar -g -ta2 baseline --language eng
python -u main.py  --input-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc/crossGenre/fold_4/test/TA2/hrs2_09-24-24_english_crossGenre-combined/data/"  --output-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc_outputs/k_fold_test_baseline_luar_20241223_104813/" --ground-truth-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc/crossGenre/fold_4/test/TA2/hrs2_09-24-24_english_crossGenre-combined/groundtruth/"  --run-id 8 --query-identifier authorIDs --candidate-identifier authorSetIDs -ta1 baseline_luar -g -ta2 baseline --language eng
python -u main.py  --input-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc/crossGenre/fold_5/test/TA2/hrs2_09-24-24_english_crossGenre-combined/data/"  --output-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc_outputs/k_fold_test_baseline_luar_20241223_104814/" --ground-truth-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc/crossGenre/fold_5/test/TA2/hrs2_09-24-24_english_crossGenre-combined/groundtruth/"  --run-id 9 --query-identifier authorIDs --candidate-identifier authorSetIDs -ta1 baseline_luar -g -ta2 baseline --language eng

Op: /data/araghavan/HIATUS/datadreamer-ta2/output/logs/5_random_splits_hrs_only_eval_logs_20241228173030.txt

<copy luar-trainer/_model checkpoint to sivs/datadreamer_lora/checkpoint dir>
cp ../datadreamer-ta2/output/sadiri_random_batch_creation_model_v4/luar-trainer/_model/* SIVs/datadreamer_lora/checkpoint/
Sadiri Only - k folds
python -u main.py  --input-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc/crossGenre/fold_1/test/TA2/hrs2_09-24-24_english_crossGenre-combined/data/"  --output-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/hrs_release_11-22-24_outputs/test_TA2_data_op_sadiri_random_batch_creation_model_v4_20241228_174001/" --ground-truth-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc/crossGenre/fold_1/test/TA2/hrs2_09-24-24_english_crossGenre-combined/groundtruth/"  --run-id 10 --query-identifier authorIDs --candidate-identifier authorSetIDs -ta1 datadreamer_lora -g -ta2 baseline --language eng
python -u main.py  --input-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc/crossGenre/fold_2/test/TA2/hrs2_09-24-24_english_crossGenre-combined/data/"  --output-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/hrs_release_11-22-24_outputs/test_TA2_data_op_sadiri_random_batch_creation_model_v4_20241228_174002/" --ground-truth-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc/crossGenre/fold_2/test/TA2/hrs2_09-24-24_english_crossGenre-combined/groundtruth/"  --run-id 11 --query-identifier authorIDs --candidate-identifier authorSetIDs -ta1 datadreamer_lora -g -ta2 baseline --language eng
python -u main.py  --input-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc/crossGenre/fold_3/test/TA2/hrs2_09-24-24_english_crossGenre-combined/data/"  --output-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/hrs_release_11-22-24_outputs/test_TA2_data_op_sadiri_random_batch_creation_model_v4_20241228_174003/" --ground-truth-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc/crossGenre/fold_3/test/TA2/hrs2_09-24-24_english_crossGenre-combined/groundtruth/"  --run-id 12 --query-identifier authorIDs --candidate-identifier authorSetIDs -ta1 datadreamer_lora -g -ta2 baseline --language eng
python -u main.py  --input-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc/crossGenre/fold_4/test/TA2/hrs2_09-24-24_english_crossGenre-combined/data/"  --output-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/hrs_release_11-22-24_outputs/test_TA2_data_op_sadiri_random_batch_creation_model_v4_20241228_174004/" --ground-truth-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc/crossGenre/fold_4/test/TA2/hrs2_09-24-24_english_crossGenre-combined/groundtruth/"  --run-id 13 --query-identifier authorIDs --candidate-identifier authorSetIDs -ta1 datadreamer_lora -g -ta2 baseline --language eng
python -u main.py  --input-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc/crossGenre/fold_5/test/TA2/hrs2_09-24-24_english_crossGenre-combined/data/"  --output-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/hrs_release_11-22-24_outputs/test_TA2_data_op_sadiri_random_batch_creation_model_v4_20241228_174005/" --ground-truth-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc/crossGenre/fold_5/test/TA2/hrs2_09-24-24_english_crossGenre-combined/groundtruth/"  --run-id 14 --query-identifier authorIDs --candidate-identifier authorSetIDs -ta1 datadreamer_lora -g -ta2 baseline --language eng

Op: /data/araghavan/HIATUS/datadreamer-ta2/output/logs/5_random_splits_sadiri_only_eval_logs_20241228173030.txt


<## 5-fold-random splits with different test set>
train_eval_k_fold - Sadiri Full Training + hrs fine tuning
python train_eval_k_fold.py --train-model-path "/data/araghavan/HIATUS/datadreamer-ta2/output/sadiri_full_training_v1final_model" --train-fold-path "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc/crossGenre/" --train-model-output-dir "/data/araghavan/HIATUS/datadreamer-ta2/output/hrs_trained_5_folds_sadiri_full_trained_v1" --eval-trained-model-checkpoint-dir "/data/araghavan/HIATUS/pausit-eval-ta2/SIVs/datadreamer_lora/checkpoint" --eval-main-script-path "/data/araghavan/HIATUS/pausit-eval-ta2/main.py" --eval-output-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/nikita_direct_splits_5_random_fold_splits_qc_outputs_sadiri_full_training_v1" --eval-ta1-approach "datadreamer_lora" --eval-ta2-approach "baseline" --eval-language "eng"

Op: 
/data/araghavan/HIATUS/pausit-eval-ta2/data/nikita_direct_splits_5_random_fold_splits_qc_outputs_sadiri_full_training_v1/run_20250108_033342/aggregated_results.json

<copy luar-trainer/_model checkpoint to sivs/datadreamer_lora/checkpoint dir>
cp ../datadreamer-ta2/output/sadiri_full_training_v1/luar-trainer/_model/* SIVs/datadreamer_lora/checkpoint/
Sadiri Only - k folds
python -u main.py  --input-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc/crossGenre/fold_1/test/TA2/hrs2_09-24-24_english_crossGenre-combined/data/"  --output-dir "/data/araghavan/HIATUS/pausit-eval-ta2/data/hrs_release_11-22-24_outputs/test_TA2_data_op_sadiri_random_batch_creation_full_model_training_v1_20250108_041800/" --ground-truth-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/nikita_direct_splits_5_random_fold_splits_qc/crossGenre/fold_1/test/TA2/hrs2_09-24-24_english_crossGenre-combined/groundtruth/"  --run-id 11 --query-identifier authorIDs --candidate-identifier authorSetIDs -ta1 datadreamer_lora -g -ta2 baseline --language eng




###### Hard Batching Techniques
## Anchor Positive File, Random Batching
python train_luar_on_sadiri_batchingvariations.py \
    --train_file_path "../data/ta2_jan_2025_trian_data/anchor_pos_train_sadiri_luarmudsbertamllv2.jsonl" \
    --dev_file_path "../data/ta2_jan_2025_trian_data/dev_sadiri_processed_with_embeddings_wo_ao3_filtered.jsonl" \
    --type_ "get_anchorpos_random_batches" \
    --model_op_dir_name "sadiri_anchorpos_random_batch_v001"
./run_kfold_eval_script_on_lora_training.sh "sadiri_anchorpos_random_batch_v001/20250402_222244"

## RankingLoss, Random Hard Batching
python train_luar_on_sadiri_batchingvariations.py \
    --train_file_path "../data/ta2_jan_2025_trian_data/hard_batching_dataset_luaremb_wo_ao3_filtered/train_sadiri_hard_batches_v001.jsonl" \
    --dev_file_path "../data/ta2_jan_2025_trian_data/dev_sadiri_processed_with_embeddings_wo_ao3_filtered.jsonl" \
    --type_ "anchorpos_rankingloss_hardbatches" \
    --model_op_dir_name "sadiri_hardpos_rankingloss_random_hardbatching_v001"
./run_kfold_eval_script_on_lora_training.sh "sadiri_hardpos_rankingloss_random_hardbatching_v001/20250402_193508"

## Sadiri Filtered Original File, Random Batching - sadiri_filtered_org_random_batching_v001
<ensure the values are changed in file: 
python train_luar_on_sadiri.py
./run_kfold_eval_script_on_lora_training.sh "sadiri_filtered_org_random_batching_v001"
CUDA_VISIBLE_DEVICES=2 python train_luar_on_sadiri.py
./run_kfold_eval_script_on_lora_training.sh "sadiri_filtered_org_random_batching_v001"
==== All 5 folds completed. Calculating average metrics... ====
==== Averaged Metrics Over 5 Folds ====
Area Under ROC Curve           .743101
partial Area Under ROC Curve   .565955
Precision                      0
Recall                         0
F1                             0
Equal Error Rate               .281564
Detection Cost Function        .864456
TAR@0.05                       .355247
=======================================
Log File: /data/araghavan/HIATUS/datadreamer-ta2/output/logs/kft_sadiri_filtered_org_random_batching_v001_eval_op.txt


CUDA_VISIBLE_DEVICES=1 python train_luar_on_sadiri_batchingvariations.py \
    --train_file_path "../data/ta2_jan_2025_trian_data/anchor_pos_train_sadiri_luarmudsbertamllv2.jsonl" \
    --dev_file_path "../data/ta2_jan_2025_trian_data/dev_sadiri_processed_with_embeddings_wo_ao3_filtered.jsonl" \
    --type_ "get_anchorpos_random_batches" \
    --model_op_dir_name "sadiri_v002"
./run_kfold_eval_script_on_lora_training.sh "sadiri_v002_get_anchorpos_random_batches_20250404_002721"
==== All 5 folds completed. Calculating average metrics... ====
==== Averaged Metrics Over 5 Folds ====
Area Under ROC Curve           .750128
partial Area Under ROC Curve   .562927
Precision                      .050000
Recall                         .006060
F1                             .010810
Equal Error Rate               .272506
Detection Cost Function        .855696
TAR@0.05                       .361554
=======================================
Log File: /data/araghavan/HIATUS/datadreamer-ta2/output/logs/kft_sadiri_v002_get_anchorpos_random_batches_20250404_002721_eval_op.txt


CUDA_VISIBLE_DEVICES=2 python train_luar_on_sadiri_batchingvariations.py \
    --train_file_path "../data/ta2_jan_2025_trian_data/hard_batching_dataset_luaremb_wo_ao3_filtered/train_sadiri_hard_batches_v001.jsonl" \
    --dev_file_path "../data/ta2_jan_2025_trian_data/dev_sadiri_processed_with_embeddings_wo_ao3_filtered.jsonl" \
    --type_ "get_anchorpos_cachedrankingloss_hardbatches" \
    --model_op_dir_name "sadiri_v002"
./run_kfold_eval_script_on_lora_training.sh "sadiri_v002_get_anchorpos_cachedrankingloss_hardbatches_20250404_000233"
==== All 5 folds completed. Calculating average metrics... ====
==== Averaged Metrics Over 5 Folds ====
Area Under ROC Curve           .708773
partial Area Under ROC Curve   .548744
Precision                      .052188
Recall                         .063173
F1                             .057030
Equal Error Rate               .316651
Detection Cost Function        .909139
TAR@0.05                       .291909
=======================================
Log File: /data/araghavan/HIATUS/datadreamer-ta2/output/logs/kft_sadiri_v002_get_anchorpos_cachedrankingloss_hardbatches_20250404_000233_eval_op.txt


cuda 0 biber use raw file to yield random anchor-pos 
CUDA_VISIBLE_DEVICES=0 python train_luar_on_sadiri_batchingvariations.py \
    --train_file_path "../data/biber/genre_data/biber_train_luar_sbert_genre_embeddings_v001.jsonl" \
    --dev_file_path "../data/ta2_jan_2025_trian_data/dev_sadiri_processed_with_embeddings_wo_ao3_filtered.jsonl" \
    --type_ "get_samplinganchorpos_random_batches" \
    --model_op_dir_name "sadiri_v001_biber"
./run_kfold_eval_script_on_lora_training.sh "sadiri_v001_biber_get_samplinganchorpos_random_batches_20250406_002434"
==== All 5 folds completed. Calculating average metrics... ====
==== Averaged Metrics Over 5 Folds ====
Area Under ROC Curve           .802185
partial Area Under ROC Curve   .530723
Precision                      0
Recall                         0
F1                             0
Equal Error Rate               .259929
Detection Cost Function        .937308
TAR@0.05                       .280209
=======================================
Log File: /data/araghavan/HIATUS/datadreamer-ta2/output/logs/kft_sadiri_v001_biber_get_samplinganchorpos_random_batches_20250406_002434_eval_op.txt

cuda 1 biber cached hard batches randpmly select anchorpos pairs
CUDA_VISIBLE_DEVICES=1 python train_luar_on_sadiri_batchingvariations.py \
    --train_file_path "../data/biber/genre_data/biber_train_anchorpos_raw_v001.jsonl" \
    --dev_file_path "../data/ta2_jan_2025_trian_data/dev_sadiri_processed_with_embeddings_wo_ao3_filtered.jsonl" \
    --type_ "get_anchorpos_random_batches" \
    --model_op_dir_name "sadiri_v001_biber"
./run_kfold_eval_script_on_lora_training.sh "sadiri_v001_biber_get_anchorpos_random_batches_20250406_002441"
==== All 5 folds completed. Calculating average metrics... ====
==== Averaged Metrics Over 5 Folds ====
Area Under ROC Curve           .840999
partial Area Under ROC Curve   .534995
Precision                      0
Recall                         0
F1                             0
Equal Error Rate               .248425
Detection Cost Function        .922486
TAR@0.05                       .321353
=======================================
Log File: /data/araghavan/HIATUS/datadreamer-ta2/output/logs/kft_sadiri_v001_biber_get_anchorpos_random_batches_20250406_002441_eval_op.txt

running: cuda 2 biber cached hard batches using batch_id indicator
CUDA_VISIBLE_DEVICES=2 python train_luar_on_sadiri_batchingvariations.py \
    --train_file_path "../data/biber/genre_data/biber_train_sadiri_anchorpos_cachedhardmixbatches_epochs3.jsonl" \
    --dev_file_path "../data/ta2_jan_2025_trian_data/dev_sadiri_processed_with_embeddings_wo_ao3_filtered.jsonl" \
    --type_ "get_anchorpos_cached_hardbatches" \
    --model_op_dir_name "sadiri_v001_biber" \
    --epochs 1
./run_kfold_eval_script_on_lora_training.sh "sadiri_v001_biber_get_anchorpos_cached_hardbatches_20250406_002445"
==== All 5 folds completed. Calculating average metrics... ====
==== Averaged Metrics Over 5 Folds ====
Area Under ROC Curve           .840203
partial Area Under ROC Curve   .519065
Precision                      0
Recall                         0
F1                             0
Equal Error Rate               .231554
Detection Cost Function        .949695
TAR@0.05                       .284598
=======================================
Log File: /data/araghavan/HIATUS/datadreamer-ta2/output/logs/kft_sadiri_v001_biber_get_anchorpos_cached_hardbatches_20250406_002445_eval_op.txt


CUDA_VISIBLE_DEVICES=2 python train_luar_on_sadiri_batchingvariations.py \
--train_file_path "../data/biber/genre_data/biber_train_sadiri_anchorpos_cachedhardmixbatches_epochs3.jsonl" \
--dev_file_path "../data/ta2_jan_2025_trian_data/dev_sadiri_processed_with_embeddings_wo_ao3_filtered.jsonl" \
--type_ "get_anchorpos_cached_hardbatches" \
--model_op_dir_name "sadiri_v002_biber" \
--epochs 1 --lora_config_r 32
./run_kfold_eval_script_on_lora_training.sh "sadiri_v002_biber_get_anchorpos_cached_hardbatches_20250406_231206"

running: cuda 3 hard batches cached mixes 
CUDA_VISIBLE_DEVICES=3 python train_luar_on_sadiri_batchingvariations.py \
    --train_file_path "../data/ta2_jan_2025_trian_data/train_sadiri_hardmixbatches_1743775820.jsonl" \
    --dev_file_path "../data/ta2_jan_2025_trian_data/dev_sadiri_processed_with_embeddings_wo_ao3_filtered.jsonl" \
    --type_ "get_anchorpos_random_batches" \
    --model_op_dir_name "sadiri_v001_filtered"
./run_kfold_eval_script_on_lora_training.sh "sadiri_v001_filtered_get_anchorpos_random_batches_20250406_002448"
==== All 5 folds completed. Calculating average metrics... ====
==== Averaged Metrics Over 5 Folds ====
Area Under ROC Curve           .760412
partial Area Under ROC Curve   .575663
Precision                      0
Recall                         0
F1                             0
Equal Error Rate               .272083
Detection Cost Function        .811801
TAR@0.05                       .384527
=======================================
Log File: /data/araghavan/HIATUS/datadreamer-ta2/output/logs/kft_sadiri_v001_filtered_get_anchorpos_random_batches_20250406_002448_eval_op.txt

running: cuda 0 hard batches cached mixes 
CUDA_VISIBLE_DEVICES=0 python train_luar_on_sadiri_batchingvariations.py \
--train_file_path "../data/ta2_jan_2025_trian_data/train_sadiri_hardmixbatches_1743775820.jsonl" \
--dev_file_path "../data/ta2_jan_2025_trian_data/dev_sadiri_processed_with_embeddings_wo_ao3_filtered.jsonl" \
--type_ "get_anchorpos_cached_hardbatches" \
--model_op_dir_name "sadiri_v001_filtered" \
--logging_steps 400 --eval_steps 1600 --save_steps 1600
./run_kfold_eval_script_on_lora_training.sh "sadiri_v001_filtered_get_anchorpos_cached_hardbatches_20250406_125236"

cuda 1 biber cached hard batches randpmly select anchorpos pairs
CUDA_VISIBLE_DEVICES=1 python train_luar_on_sadiri_batchingvariations.py \
    --train_file_path "../data/biber/genre_data/biber_train_anchorpos_raw_v001.jsonl" \
    --dev_file_path "../data/ta2_jan_2025_trian_data/dev_sadiri_processed_with_embeddings_wo_ao3_filtered.jsonl" \
    --type_ "get_anchorpos_random_batches" \
    --model_op_dir_name "sadiri_v002_biber" \
    --learning_rate 0.001 --epochs 4 --lora_config_lora_dropout 0.5
./run_kfold_eval_script_on_lora_training.sh "sadiri_v002_biber_get_anchorpos_random_batches_20250406_040459"
==== All 5 folds completed. Calculating average metrics... ====
==== Averaged Metrics Over 5 Folds ====
Area Under ROC Curve           .836206
partial Area Under ROC Curve   .538592
Precision                      0
Recall                         0
F1                             0
Equal Error Rate               .243251
Detection Cost Function        .919026
TAR@0.05                       .329933
=======================================
Log File: /data/araghavan/HIATUS/datadreamer-ta2/output/logs/kft_sadiri_v002_biber_get_anchorpos_random_batches_20250406_040459_eval_op.train_sadiri_hardmixbatches_1743775820


CUDA_VISIBLE_DEVICES=1 python train_luar_on_sadiri_batchingvariations.py \
--train_file_path "../data/biber/genre_data/biber_train_anchorpos_raw_v001.jsonl" \
--dev_file_path "../data/ta2_jan_2025_trian_data/dev_sadiri_processed_with_embeddings_wo_ao3_filtered.jsonl" \
--type_ "get_anchorpos_random_batches" \
--model_op_dir_name "sadiri_v003_biber" \
--learning_rate 0.0001 --epochs 3 --lora_config_lora_dropout 0.2 --logging_steps 200 --eval_steps 200 --save_steps 1000
./run_kfold_eval_script_on_lora_training.sh "sadiri_v003_biber_get_anchorpos_random_batches_20250406_105208"
==== All 5 folds completed. Calculating average metrics... ====
==== Averaged Metrics Over 5 Folds ====
Area Under ROC Curve           .839047
partial Area Under ROC Curve   .533062
Precision                      0
Recall                         0
F1                             0
Equal Error Rate               .214728
Detection Cost Function        .922288
TAR@0.05                       .319916
=======================================
Log File: /data/araghavan/HIATUS/datadreamer-ta2/output/logs/kft_sadiri_v003_biber_get_anchorpos_random_batches_20250406_105208_eval_op.txt


CUDA_VISIBLE_DEVICES=1 python train_luar_on_sadiri_batchingvariations.py \
--train_file_path "../data/biber/genre_data/biber_train_anchorpos_raw_v001.jsonl" \
--dev_file_path "../data/ta2_jan_2025_trian_data/dev_sadiri_processed_with_embeddings_wo_ao3_filtered.jsonl" \
--type_ "get_anchorpos_random_batches" \
--model_op_dir_name "sadiri_v004_biber" \
--learning_rate 0.001 --epochs 2 --lora_config_lora_dropout 0.2 \
--logging_steps 100 --eval_steps 200 --save_steps 1000
./run_kfold_eval_script_on_lora_training.sh  "sadiri_v004_biber_get_anchorpos_random_batches_20250406_124702"
==== All 5 folds completed. Calculating average metrics... ====
==== Averaged Metrics Over 5 Folds ====
Area Under ROC Curve           .834441
partial Area Under ROC Curve   .531167
Precision                      0
Recall                         0
F1                             0
Equal Error Rate               .237827
Detection Cost Function        .936967
TAR@0.05                       .293166
=======================================
Log File: /data/araghavan/HIATUS/datadreamer-ta2/output/logs/kft_sadiri_v004_biber_get_anchorpos_random_batches_20250406_124702_eval_op.txt


CUDA_VISIBLE_DEVICES=1 python train_luar_on_sadiri_batchingvariations.py \
--train_file_path "../data/biber/genre_data/biber_train_anchorpos_raw_v001.jsonl" \
--dev_file_path "../data/ta2_jan_2025_trian_data/dev_sadiri_processed_with_embeddings_wo_ao3_filtered.jsonl" \
--type_ "get_anchorpos_random_batches" \
--model_op_dir_name "sadiri_v005_biber" \
--learning_rate 0.0001 --epochs 5
./run_kfold_eval_script_on_lora_training.sh "sadiri_v005_biber_get_anchorpos_random_batches_20250406_151447"
==== All 5 folds completed. Calculating average metrics... ====
==== Averaged Metrics Over 5 Folds ====
Area Under ROC Curve           .836471
partial Area Under ROC Curve   .534724
Precision                      0
Recall                         0
F1                             0
Equal Error Rate               .225364
Detection Cost Function        .926634
TAR@0.05                       .326813
=======================================
Log File: /data/araghavan/HIATUS/datadreamer-ta2/output/logs/kft_sadiri_v005_biber_get_anchorpos_random_batches_20250406_151447_eval_op.txt


CUDA_VISIBLE_DEVICES=1 python train_luar_on_sadiri_batchingvariations.py \
--train_file_path "../data/biber/genre_data/biber_train_anchorpos_raw_v001.jsonl" \
--dev_file_path "../data/ta2_jan_2025_trian_data/dev_sadiri_processed_with_embeddings_wo_ao3_filtered.jsonl" \
--type_ "get_anchorpos_random_batches" \
--model_op_dir_name "sadiri_v006_biber" \
--learning_rate 0.0004 --epochs 2 --lora_config_r 8
./run_kfold_eval_script_on_lora_training.sh "sadiri_v006_biber_get_anchorpos_random_batches_20250406_181431"
==== All 5 folds completed. Calculating average metrics... ====
==== Averaged Metrics Over 5 Folds ====
Area Under ROC Curve           .836737
partial Area Under ROC Curve   .530565
Precision                      0
Recall                         0
F1                             0
Equal Error Rate               .230734
Detection Cost Function        .927001
TAR@0.05                       .313266
=======================================
Log File: /data/araghavan/HIATUS/datadreamer-ta2/output/logs/kft_sadiri_v006_biber_get_anchorpos_random_batches_20250406_181431_eval_op.txt


CUDA_VISIBLE_DEVICES=1 python train_luar_on_sadiri_batchingvariations.py \
--train_file_path "../data/biber/genre_data/biber_train_anchorpos_raw_v001.jsonl" \
--dev_file_path "../data/ta2_jan_2025_trian_data/dev_sadiri_processed_with_embeddings_wo_ao3_filtered.jsonl" \
--type_ "get_anchorpos_random_batches" \
--model_op_dir_name "sadiri_v007_biber" \
--lora_config_r 32
./run_kfold_eval_script_on_lora_training.sh "sadiri_v007_biber_get_anchorpos_random_batches_20250406_202915"
==== All 5 folds completed. Calculating average metrics... ====
==== Averaged Metrics Over 5 Folds ====
Area Under ROC Curve           .848020
partial Area Under ROC Curve   .535726
Precision                      0
Recall                         0
F1                             0
Equal Error Rate               .225499
Detection Cost Function        .919334
TAR@0.05                       .328250
=======================================
Log File: /data/araghavan/HIATUS/datadreamer-ta2/output/logs/kft_sadiri_v007_biber_get_anchorpos_random_batches_20250406_202915_eval_op.txt


CUDA_VISIBLE_DEVICES=1 python train_luar_on_sadiri_batchingvariations.py \
--train_file_path "../data/biber/genre_data/biber_train_anchorpos_raw_v001.jsonl" \
--dev_file_path "../data/ta2_jan_2025_trian_data/dev_sadiri_processed_with_embeddings_wo_ao3_filtered.jsonl" \
--type_ "get_anchorpos_random_batches" \
--model_op_dir_name "sadiri_v008_biber" \
--lora_config_r 32 --epochs 10
./run_kfold_eval_script_on_lora_training.sh "sadiri_v008_biber_get_anchorpos_random_batches_20250406_230825"
==== All 5 folds completed. Calculating average metrics... ====
==== Averaged Metrics Over 5 Folds ====
Area Under ROC Curve           .831073
partial Area Under ROC Curve   .530929
Precision                      0
Recall                         0
F1                             0
Equal Error Rate               .234721
Detection Cost Function        .937623
TAR@0.05                       .266663
=======================================
Log File: /data/araghavan/HIATUS/datadreamer-ta2/output/logs/kft_sadiri_v008_biber_get_anchorpos_random_batches_20250406_230825_eval_op.txt



python -u main.py \
--input-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/english_TA2_p1_and_p2_dev_20240207_v2/TA2/data/" \
--output-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/english_TA2_p1_and_p2_dev_20240207_v2_outputs/test1" \
--ground-truth-dir "/data/araghavan/HIATUS/datadreamer-ta2/data/hrs/english_TA2_p1_and_p2_dev_20240207_v2/TA2/groundtruth/" \
--run-id 14 --query-identifier authorIDs --candidate-identifier authorSetIDs -ta1 datadreamer_lora -g -ta2 baseline --language eng



types of files:
- data is at author-doc level
- data is at author-anchor-pos level
- data is at author-anchor-pos-batch_id level

data sampling strategies:
- "get_samplinganchorpos_random_batches": agg docs at author level, select random 2 docs as anchor-pos
- "get_anchorpos_random_batches": agg docs at author level, select random 1 anchor-pos pair
- "get_anchorpos_cached_hardbatches": use the batch_id column (created with whatever logic)

Summary:
Biber training > Previous Sadiri Hard Positive Filtered





